## Битва Измерений

![Spiral](spiral.png)

Это карточная настольная игра для 3-5 игроков. В ней 5 мастей, каждый играет за свою масть, собирает карты в разных зонах, с помощью игровых механик карты перемещаются и удаляются с поля. Побеждает тот, у кого будет большее количество карт в конце игры.

Более подробные правила в документе `Battle_of_Dimensions_Rules.pdf`

Эта игра моего авторства. Идею вынашивали с другом несколько лет. В 2024 при поддержки GPT и Mind, за несколько итераций смогли собрать играбельный прототип, распечатать несколько наборов.

![Entity](entity_cards.png)

![Faction](faction_cards.png)

В ходе разработки игры встал вопрос, а каков баланс игры. По хорошему нужно было создать пробные наборы (сверстать, распечатать), собрать фокус группу (любителей настолок, человек 5-10), дать им поиграть 10+ партий в своих компаниях, собрать от них статистику, обработать результаты по всем партиям, внести правки в механику игры чтобы выровнять баланс, повторить все действия.

Однако это все очень затратно и долго. А так как я программист, то решил посчитать баланс с помощью Python. Скрипты с кодом доступны в папке `/02_battle_dimensions`. Расчеты ниже.


## Баланс игры

### Baseline

Если предположить:

- что колода тасуется правильно, то есть тасуется через 7 каскадных тасований, дающих абсолютно случайное равновероятное расположение всех карт в колоде,
- игра проходит по Базовым правилам,
- и, что играют условные «обезьяны», то есть принимаемые решения в ходе игры абсолютно случайны (равновероятны),

Тогда, математическое ожидание победы за определенную Фракцию будет:

|            | 5 игроков | 4 игрока | 3 игрока |
| ---------- |:---------:|:--------:|:--------:|
| Красный    |    20%    |   25%    |  33.33%  |
| Зелёный    |    20%    |   25%    |  33.33%  |
| Жёлтый     |    20%    |   25%    |  33.33%  |
| Синий      |    20%    |   25%    |  33.33%  |
| Фиолетовый |    20%    |   25%    |  33.33%  |

Вероятность победы за определенную Фракцию, на 1 млн. симуляций будет:

|            | 5 игроков | 4 игрока | 3 игрока |
| ---------- |:---------:|:--------:|:--------:|
| Красный    |  20.03%   |  24.96%  |  33.32%  |
| Зелёный    |  20.03%   |  25.08%  |  33.29%  |
| Жёлтый     |  19.95%   |  24.97%  |  33.31%  |
| Синий      |  19.97%   |  25.02%  |  33.39%  |
| Фиолетовый |  20.01%   |  24.97%  |  33.36%  |

- здесь наглядно видно чем отличается математическое ожидание от выборочного среднего (вероятности на ограниченном количестве симуляций)


### Epic mode

Если предположить:

- что колода тасуется правильно, то есть тасуется через 7 каскадных тасований, дающих абсолютно случайное равновероятное расположение всех карт в колоде,
- игра проходит в Эпическом режиме (у каждой Фракции есть свои уникальные механики), такие как:
    - Красный  —  +1 карта, неуязвимая к Чёрной Дыре, не переносится Кротовой Норой, двигать может только владелец.
    - Зелёный — если в любом одном Измерении количество зелёных карт `>= 5` → немедленная победа зелёного
    - Жёлтый — если во всех Измерениях будет минимум по 1 жёлтой в каждом и суммарно `>= 5` жёлтых по всем Измерениям → немедленная победа жёлтого
    - Синий — если в любом Измерении существует синий отряд, у которого сумма значений карт `= 42`, → немедленная победа синего
    - Фиолетовый — трансформация поверженных карт в Ауры Тьмы; фиолетовый не бьёт Ауры; Ауры не перемещаются; в конце игры Ауры добавляются к фиолетовым.

- и, что играют условные «обезьяны», то есть принимаемые решения в ходе игры абсолютно случайны (равновероятны),

То вероятность победы за определенную Фракцию, на 1 млн. симуляций будет:

|            | 5 игроков | 4 игрока | 3 игрока |
| ---------- | --------- | -------- | -------- |
| Красный    | 11.88%    | 17.49%   | 26.39%   |
| Зелёный    | 8.98%     | 11.93%   | 18.54%   |
| Жёлтый     | 10.38%    | 19.44%   | 35.98%   |
| Синий      | 56.34%    | 59.06%   | 60.42%   |
| Фиолетовый | 12.42%    | 17.03%   | 25.38%   |

- особые механики игры дают очень сильное преимущество Синей фракции
- но это только при условии чистого рандома

### Epic Tactics

Если предположить:

- что колода тасуется правильно, то есть тасуется через 7 каскадных тасований, дающих абсолютно случайное равновероятное расположение всех карт в колоде,

- игра проходит в Эпическом режиме (у каждой Фракции есть свои уникальные механики), такие как:
    - Красный  —  +1 карта, неуязвимая к Чёрной Дыре, не переносится Кротовой Норой, двигать может только владелец.
    - Зелёный — если в любом одном Измерении количество зелёных карт `>= 5` → немедленная победа зелёного
    - Жёлтый — если во всех Измерениях будет минимум по 1 жёлтой в каждом и суммарно `>= 5` жёлтых по всем Измерениям → немедленная победа жёлтого
    - Синий — если в любом Измерении существует синий отряд, у которого сумма значений карт `= 42`, → немедленная победа синего
    - Фиолетовый — трансформация поверженных карт в Ауры Тьмы; фиолетовый не бьёт Ауры; Ауры не перемещаются; в конце игры Ауры добавляются к фиолетовым.

- и, что играют условные «алгоритмы», то есть принимаемые решения исходят из  тактических рациональных установок (стремление к победе), таких как:
    - не бить по своим (если есть такая возможность)
    - бить по самой многочисленной Фракции в момент хода (кроме себя), учитывая что Ауры Тьмы прибавляются к Фиолетовым
    - Фракции с условием досрочной победы (Зеленый, Желтый, Синий), пытаются достичь этих условий
    - следить за Фракциями с условием досрочной победы (Зеленый, Желтый, Синий), препятствовать достижению их условиям досрочной победы

То вероятность победы за определенную Фракцию, на 1 млн. симуляций будет:

|            | 5 игроков | 4 игрока | 3 игрока |
| ---------- | --------- | -------- | -------- |
| Красный    | 5.54%     | 13.90%   | 32.06%   |
| Зелёный    | 17.40%    | 16.32%   | 23.50%   |
| Жёлтый     | 19.29%    | 21.69%   | 24.27%   |
| Синий      | 22.13%    | 22.13%   | 27.04%   |
| Фиолетовый | 35.65%    | 50.93%   | 59.77%   |

- а вот если задать некоторые эвристики, тактики для игры, то больший перевес на стороне Фиолетовой фракции
- чем меньше игроков в партии, тем сильнее перевес Фиолетовой фракции, так как меньшее количесво игроков сопротивляется доминации Фиолетовых
- по хорошему фиксить надо именно Фиолетовую фракцию!